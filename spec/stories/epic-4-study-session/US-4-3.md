# US-4.3: Rate Card Recall

**Epic:** [Study Session](EPIC.md)
**Status:** Done
**Priority:** Critical

---

## Description

As a **user**,
I want to **rate how well I remembered the card**,
So that **the system can schedule my next review optimally**.

---

## Acceptance Criteria

- [x] Four rating buttons: Again, Hard, Good, Easy
- [x] Buttons appear after card is flipped
- [x] Each button shows next review interval
- [x] Rating submits review to API
- [x] SM-2 algorithm calculates next due date
- [x] Session advances to next card

---

## Technical Notes

### Implementation
- **Component**: `src/components/StudySession.tsx`
- **API**: `src/app/api/reviews/route.ts`
- **Algorithm**: `src/lib/sm2.ts`

### Button Mapping
| Button | Quality | Behavior |
|--------|---------|----------|
| Again | 0 | Reset to 1 day |
| Hard | 2 | Short interval |
| Good | 4 | Normal interval |
| Easy | 5 | Long interval |

### API Request
```typescript
// POST /api/reviews
Request: {
  cardId: string,
  quality: number  // 0, 2, 4, or 5
}
Response: {
  dueDate: string,
  interval: number,
  easeFactor: number,
  repetitions: number
}
```

### SM-2 Function
```typescript
function calculateSM2(
  quality: number,
  prevEaseFactor: number,
  prevInterval: number,
  prevRepetitions: number
): SM2Result
```

---

## RICE Score

| Factor | Value | Rationale |
|--------|-------|-----------|
| Reach | 100% | All users rate |
| Impact | 3 (Massive) | Core algorithm |
| Confidence | 100% | Proven algorithm |
| Effort | 1 week | Algorithm + UI + API |

**Score:** (100 × 3 × 1.0) / 1 = **300**
