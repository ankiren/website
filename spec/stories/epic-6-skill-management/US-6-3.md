---
title: "US-6.3: Record Skill Score"
epic: Skill Management
status: Planned
priority: Critical
github_issue: ""
---

# US-6.3: Record Skill Score

## Description

As a **user**,
I want to **record my proficiency scores for skills I'm tracking**,
So that **I can monitor my progress and improvement over time**.

---

## Acceptance Criteria

| AC | Title | Description |
|----|-------|-------------|
| AC-6.3.1 | Add Skill to Track | User can add a skill to their tracking list |
| AC-6.3.2 | Record New Score | User can record a score with source and note |
| AC-6.3.3 | Update Current Score | Recording updates the current score |
| AC-6.3.4 | Remove Skill from Tracking | User can stop tracking a skill |

---

### AC-6.3.1: Add Skill to Track

```gherkin
Scenario: Add skill to my tracking list
  Given I am logged in as a user
  And a skill "Reading" exists
  And I am not tracking "Reading"
  When I click "Add to My Skills" on "Reading"
  Then "Reading" should be added to my tracked skills
  And I should see a success message
  And my current score should be empty

Scenario: Cannot add duplicate skill
  Given I am logged in as a user
  And I am already tracking "Reading"
  When I view "Reading" in the skills catalog
  Then I should see "Already Tracking" instead of "Add" button
```

### AC-6.3.2: Record New Score

```gherkin
Scenario: Record a test score
  Given I am logged in as a user
  And I am tracking the skill "Reading"
  When I click "Record Score" on "Reading"
  And I enter score "75"
  And I select source "test"
  And I enter note "IELTS practice test - Section 1"
  And I click "Save" button
  Then the score should be recorded
  And I should see a success message
  And the entry should appear in my score history

Scenario: Record a practice score
  Given I am logged in as a user
  And I am tracking the skill "Listening"
  When I record a score of "60" with source "practice"
  Then the score should be saved with source "practice"

Scenario: Record score without note
  Given I am logged in as a user
  And I am tracking the skill "Speaking"
  When I enter score "80"
  And I select source "assessment"
  And I leave note empty
  And I click "Save" button
  Then the score should be recorded
  And the note field should be empty in history

Scenario: Score validation
  Given I am recording a score
  When I enter a score less than 0
  Then I should see an error "Score must be between 0 and 100"
  When I enter a score greater than 100
  Then I should see an error "Score must be between 0 and 100"
```

### AC-6.3.3: Update Current Score

```gherkin
Scenario: Current score updates after recording
  Given I am logged in as a user
  And I am tracking "Reading" with current score 50
  When I record a new score of 75
  Then my current score for "Reading" should update to 75
  And my last_assessed_at should update to now

Scenario: Score history preserves all entries
  Given I have recorded scores 50, 60, 70 for "Reading"
  When I record a new score of 75
  Then my current score should be 75
  And my history should show all 4 entries: 50, 60, 70, 75
```

### AC-6.3.4: Remove Skill from Tracking

```gherkin
Scenario: Remove skill from tracking
  Given I am logged in as a user
  And I am tracking "Writing"
  When I click "Remove from My Skills" on "Writing"
  And I confirm the action
  Then "Writing" should be removed from my tracked skills
  And my score history for "Writing" should be deleted
  And I should see a success message

Scenario: Confirm before removing
  Given I am logged in as a user
  And I am tracking "Writing" with score history
  When I click "Remove from My Skills"
  Then I should see a confirmation dialog
  And the dialog should warn about losing score history
```

---

## Technical Notes

### Implementation
- **Page**: `src/app/dashboard/skills/[id]/page.tsx` - Skill detail page
- **API**: `src/app/api/me/skills/route.ts` - User skill tracking
- **Component**: `src/components/ScoreInput.tsx` - Score recording form

### Database
```sql
-- Add skill to tracking
INSERT INTO Users_Skills (id, user_id, skill_id, current_score, last_assessed_at)
VALUES (uuid(), :userId, :skillId, NULL, NULL);

-- Record score (update current + add history)
UPDATE Users_Skills
SET current_score = :score, last_assessed_at = now()
WHERE user_id = :userId AND skill_id = :skillId;

INSERT INTO Users_Skills_History (id, user_skill_id, score, source, note, created_at)
VALUES (uuid(), :userSkillId, :score, :source, :note, now());

-- Remove skill from tracking (cascade deletes history)
DELETE FROM Users_Skills WHERE user_id = :userId AND skill_id = :skillId;
```

### API Endpoints
| Method | Endpoint | Description |
|--------|----------|-------------|
| POST | `/api/me/skills` | Add skill to track |
| PUT | `/api/me/skills/:skillId` | Update current score |
| DELETE | `/api/me/skills/:skillId` | Remove skill from tracking |
| POST | `/api/me/skills/:skillId/history` | Record new score entry |

### Request/Response Format
```json
// POST /api/me/skills/:skillId/history
{
  "score": 75,
  "source": "test",
  "note": "IELTS practice test"
}

// Response
{
  "id": "history-123",
  "score": 75,
  "source": "test",
  "note": "IELTS practice test",
  "createdAt": "2025-12-13T10:00:00Z"
}
```

### Error Handling
| Error | HTTP Status | Message |
|-------|-------------|---------|
| Skill not found | 404 | "Skill not found" |
| Already tracking | 409 | "Already tracking this skill" |
| Invalid score | 400 | "Score must be between 0 and 100" |
| Invalid source | 400 | "Source must be test, practice, or assessment" |

---

## RICE Score

| Factor | Value | Rationale |
|--------|-------|-----------|
| Reach | 50% | Core feature for all users |
| Impact | 3 (Massive) | Primary value proposition |
| Confidence | 80% | Clear requirements |
| Effort | 1 week | API + UI + validation |

**Score:** (50 × 3 × 0.8) / 1 = **120**
