---
title: "US-1.1: User Registration"
epic: User Authentication
status: Done
priority: Critical
github_issue: https://github.com/ankiren/website/issues/1
---

# US-1.1: User Registration

## Description

As a **new user**,
I want to **create an account using my Google account**,
So that **I can save my flashcards and track my learning progress**.

---

## Acceptance Criteria

### Registration Page
- [x] User can access registration page at `/register`
- [x] User can navigate to login page from registration

### Google OAuth Auto-Registration
- [x] "Continue with Google" button is visible on registration page
- [x] Clicking the button redirects to Google OAuth consent screen
- [x] User can authorize Ankiren to access their Google profile
- [x] New users are automatically registered with their Google email
- [x] User's name and profile picture are imported from Google (if available)
- [x] Email must be unique (no duplicate accounts)
- [x] Successful Google registration redirects to dashboard (no login required)
- [x] Error message is shown if Google authentication fails

---

## Technical Notes

### Implementation
- **Page**: `src/app/register/page.tsx` - Registration page with Google button
- **Auth Config**: `src/lib/auth.ts` - Google OAuth provider and auto-registration

### Database
```sql
INSERT INTO User (id, email, name, image, googleId, createdAt, updatedAt)
VALUES (cuid(), googleEmail, googleName, googleImage, googleId, now, now)
```

### Google OAuth Flow
```
User clicks "Continue with Google" on /register
    ↓
Redirect to Google OAuth consent screen
    ↓
User authorizes access
    ↓
NextAuth signIn callback checks if user exists
    ├── User exists → Login (no new registration)
    └── New user → Create account with Google data
    ↓
Create JWT session
    ↓
Redirect to /dashboard
```

### Error Handling
| Error | Behavior |
|-------|----------|
| Google auth cancelled | Return to registration page |
| Google auth error | Show error message |
| Duplicate email (existing user) | Login instead of register |

---

## RICE Score

| Factor | Value | Rationale |
|--------|-------|-----------|
| Reach | 100% | All users need to register |
| Impact | 3 (Massive) | Foundation for all features |
| Confidence | 100% | NextAuth.js has built-in Google support |
| Effort | 0.5 week | Google OAuth + auto-registration |

**Score:** (100 × 3 × 1.0) / 0.5 = **600**
