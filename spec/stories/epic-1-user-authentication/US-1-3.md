---
title: "US-1.3: User Logout"
epic: User Authentication
status: Done
priority: High
github_issue: https://github.com/ankiren/website/issues/3
---

# US-1.3: User Logout

## Description

As a **logged-in user**,
I want to **logout from my Google-authenticated session**,
So that **I can secure my data on shared devices**.

---

## Acceptance Criteria

### AC-1.3.1: Logout Button Visibility

```gherkin
Scenario: Logout button visible when logged in
  Given I am logged in with my Google account
  When I view the navigation bar
  Then I should see a "Sign Out" button
```

### AC-1.3.2: Successful Logout

```gherkin
Scenario: Successful logout
  Given I am logged in with my Google account
  When I click the "Sign Out" button
  Then the Google OAuth session should be cleared
  And the JWT cookie should be cleared from browser
  And I should be redirected to the home page "/"
```

### AC-1.3.3: Protected Pages Access After Logout

```gherkin
Scenario: Protected pages inaccessible after logout
  Given I have logged out
  When I try to access the dashboard "/dashboard"
  Then I should be redirected to the login page "/login"

Scenario: Other protected pages inaccessible after logout
  Given I have logged out
  When I try to access any protected page
  Then I should be redirected to the login page "/login"
```

### AC-1.3.4: Re-Authentication Required

```gherkin
Scenario: Re-authentication required after logout
  Given I have logged out
  When I want to access the app again
  Then I must click "Continue with Google" to re-authenticate
  And I should see the Google account picker if multiple accounts are available
```

### AC-1.3.5: Session Preservation

```gherkin
Scenario: Ankiren session cleared but Google session preserved
  Given I am logged in with my Google account
  When I click the "Sign Out" button
  Then my Ankiren session should be cleared
  But my Google account session in the browser should remain active
```

---

## Technical Notes

### Implementation
- **Component**: `src/components/Navbar.tsx`
- **Handler**: NextAuth `signOut()` function

### Logout Flow
```
User clicks "Sign Out"
    ↓
NextAuth signOut() called
    ↓
Google OAuth session cleared
    ↓
JWT cookie cleared
    ↓
Session invalidated
    ↓
Redirect to home page
```

### Notes
- Logout only clears the Ankiren session, not the Google account session
- User may still be logged into Google in their browser
- Re-login will show Google account picker if multiple accounts are available

---

## RICE Score

| Factor | Value | Rationale |
|--------|-------|-----------|
| Reach | 100% | All users will logout |
| Impact | 2 (High) | Security feature |
| Confidence | 100% | Simple implementation |
| Effort | 0.25 week | Built into NextAuth |

**Score:** (100 × 2 × 1.0) / 0.25 = **800**
