# US-1.2: User Login

**Epic:** [User Authentication](EPIC.md)
**Status:** Done
**Priority:** Critical

---

## Description

As a **registered user**,
I want to **login with my email and password**,
So that **I can access my flashcards and continue learning**.

---

## Acceptance Criteria

- [x] User can access login page at `/login`
- [x] Form requires email and password
- [x] Credentials are validated against database
- [x] Invalid credentials show error message
- [x] Successful login redirects to dashboard
- [x] JWT session is created and stored in cookie
- [x] User can navigate to registration page from login

---

## Technical Notes

### Implementation
- **Auth Config**: `src/lib/auth.ts`
- **Page**: `src/app/login/page.tsx`
- **Handler**: `src/app/api/auth/[...nextauth]/route.ts`

### Authentication Flow
```
User submits credentials
    ↓
NextAuth authorize() callback
    ↓
Query D1 for user by email
    ↓
Compare password with bcrypt
    ↓
Return user object or null
    ↓
Generate JWT session
    ↓
Set HTTP-only cookie
    ↓
Redirect to /dashboard
```

### Session Structure
```typescript
{
  user: {
    id: string,
    email: string,
    name: string | null
  },
  expires: string // ISO date
}
```

---

## RICE Score

| Factor | Value | Rationale |
|--------|-------|-----------|
| Reach | 100% | All users need to login |
| Impact | 3 (Massive) | Required for access |
| Confidence | 100% | Standard pattern |
| Effort | 0.5 week | NextAuth handles complexity |

**Score:** (100 × 3 × 1.0) / 0.5 = **600**
